The configuration of Virtual Pharmacist 

Virtual Pharmacist is a free and open source web-based platform for personal genome interpretation.
Please follow steps below to setup the platform successfully in your own server.

1: Be sure to start the web service of your own server, such as apache and nginx
2: Put all of the contents of the folder to the default folder for the website. 
   for apache, the default folder storing the website is /var/www/html/
3: specify the parameters of web service so as to support the file uploading from browser.
	 		   file_uploads=On;					//allow the file uploading from the web browser
	 		   upload_max_filesize=20M	//set the maximum size of the uploading file
	 		   post_max_size=80M				//set the maximum size for posting the file to web server

4: Database configuration
	 1): mysql -uroot -p[your_root_password]																			//login mysql in root 
	 2): create database vp;																											//create a empty database for data inmport
	 3): create user vp@localhost identified by 'vp123456';												//create a user to manipulate the database 
	 4): grant all privileges on vp.* to vp; 																			// grant all privileges of database pgi to account pgi;
	 5): flush; //update the privilegs of accounts	
	 6): The PHP script for excute the mysql database is mysql_connect.php in the root folder of package
	 7): import the vp.sql database file into vp database:
	 			mysql -u vp -p vp < vp.sql;

5: make sure that you have enable the ftp uploading port 22 for uploading high-throughput sequence data.

6: Configuration of the uploading interface:
	 1): open the upload_js.php,upload1_js.php,upload2_js.php,upload3_js.php
	 2) change the following lines:
	 		a): upload_js.php
                                flash_url : "http://sustc-genome.org.cn/vp/upload_file/swfupload/swfupload.swf",
                                upload_url: "http://sustc-genome.org.cn/vp/upload_file/upload.php", 	 		 	 			
	 		b): upload1_js.php
                                flash_url : "http://sustc-genome.org.cn/vp/upload_file/swfupload/swfupload.swf",
                                upload_url: "http://sustc-genome.org.cn/vp/upload_file/upload1.php", 	 		   
	 		c): upload2_js.php
                                flash_url : "http://sustc-genome.org.cn/vp/upload_file/swfupload/swfupload.swf",
                                upload_url: "http://sustc-genome.org.cn/vp/upload_file/upload2.php", 
	 		d): upload3_js.php
                                flash_url : "http://sustc-genome.org.cn/vp/upload_file/swfupload/swfupload.swf",
                                upload_url: "http://sustc-genome.org.cn/vp/upload_file/upload3.php",   
      (change the url of your own website so as to make sure that the uploading interface can work very well)
  3): The destination of files uploaded from the web uploaind interface.
  		a): microarray data:    ./upload_file/tmp_data
  		b): VCF data:						./upload_file/vcf_data
  		c): multiple sample VCF data ./project



7: Configuration of high-throughput sequence analysis pipeline
	1):Configuration of necessary three party software for Virtual Pharmacist to analyze the high-throughput sequence data
			a): Bowtie2 (a package for aligning the sequence to genome):
			b): Samtools (manipulation of alignment result):
			c): VarScan (variant calling):
			d): PyVCF (A python package for VCF manipulation and variant calling for VCF):
				i):  create a folder /bin/bioexe/ and grant 777 to this folder recursively.
				     mkdir /bin/bioexe/ chmode 777 -R /bin/bioexe/ 		                                                                                         
				ii): put all of files inside ./software to /bin/bioexe
				iii):grant 777 privilege to all files inside the /bin/bioexe so that it can be excuated by Virtual Pharmacist successfully
	2): index bulding for human genome.
			a): download the hg19.fa from the UCSC ftp and put it into ./bin/hg19
			b): change directory to the ./bin/hg19
			c): index the hg19.fa by bowtie2:
				bowtie2-build hg19.fa hg19 (make sure that six index .bt files will be generated by bowtie2 after the indexing process)

8: Additional cautions:
	If the software package can't work very well, please check whether all of the folders and files are granted to the correct privileges
	

Congratulations! Virtual Pharmacist will be setup successfully if you follow the steps above. 		
							     